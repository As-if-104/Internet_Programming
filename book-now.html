<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TurfTime - Book Your Slot</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            padding: 15px 30px;
            border-radius: 15px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 24px;
            font-weight: bold;
            color: white;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: pointer;
        }

        .back-btn {
            background: rgba(255, 255, 255, 0.2);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .back-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: translateY(-2px);
        }

        .booking-container {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .booking-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .booking-header h1 {
            font-size: 2.5rem;
            color: #333;
            margin-bottom: 10px;
        }

        .booking-header p {
            font-size: 1.1rem;
            color: #666;
        }

        .booking-form {
            display: grid;
            gap: 30px;
        }

        .form-section {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .form-section h3 {
            color: #495057;
            margin-bottom: 20px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .date-selector {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .date-input {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .date-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .time-slots {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
        }

        .time-slot {
            background: white;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
        }

        .time-slot:hover {
            border-color: #667eea;
            transform: translateY(-2px);
        }

        .time-slot.selected {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .time-slot.booked {
            background: #ff6b6b;
            color: white;
            cursor: not-allowed;
            opacity: 0.7;
        }

        .time-slot .time {
            font-weight: bold;
            font-size: 14px;
        }

        .time-slot .price {
            font-size: 12px;
            opacity: 0.8;
            margin-top: 5px;
        }

        .selected-slots {
            margin-top: 20px;
            padding: 20px;
            background: #e7f3ff;
            border-radius: 10px;
            border-left: 4px solid #667eea;
        }

        .selected-slots h4 {
            color: #495057;
            margin-bottom: 10px;
        }

        .slot-summary {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: white;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 10px;
        }

        .slot-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .remove-slot {
            background: #ff6b6b;
            color: white;
            border: none;
            padding: 8px 12px;
            border-radius: 5px;
            cursor: pointer;
            font-size: 12px;
        }

        .booking-summary {
            background: #f8f9fa;
            padding: 25px;
            border-radius: 15px;
            border: 2px solid #e9ecef;
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }

        .summary-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.1rem;
        }

        .contact-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
        }

        .contact-input {
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s ease;
        }

        .contact-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .special-requests {
            width: 100%;
            min-height: 100px;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            resize: vertical;
        }

        .submit-btn {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 10px;
            font-size: 18px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            width: 100%;
            margin-top: 20px;
        }

        .submit-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(102, 126, 234, 0.3);
        }

        .submit-btn:disabled {
            background: #ccc;
            cursor: not-allowed;
            transform: none;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
            display: none;
        }

        .alert.success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert.error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .slot-limit-warning {
            background: #fff3cd;
            color: #856404;
            padding: 10px;
            border-radius: 5px;
            margin-top: 10px;
            font-size: 14px;
        }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }

            .booking-container {
                padding: 20px;
            }

            .time-slots {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            .contact-info {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <div class="logo">
                <span>üèüÔ∏è</span>
                TurfTime
            </div>
            <button class="back-btn" onclick="goBack()"> <a href="TurfTime.html" style="text-decoration: none; color: white;"> ‚Üê Back to Home </a> </button>
        </div>

        <div class="booking-container">
            <div class="booking-header">
                <h1>Book Your Turf Slot</h1>
                <p>Select your preferred date and time slots. You can book up to 3 consecutive slots.</p>
            </div>

            <div class="alert" id="alertMessage"></div>

            <form class="booking-form" id="bookingForm">
                <!-- Date Selection -->
                <div class="form-section">
                    <h3>üìÖ Select Date</h3>
                    <div class="date-selector">
                        <input type="date" class="date-input" id="bookingDate" required>
                        <select class="date-input" id="turfSelect" required>
                            <option value="">Select Turf</option>
                            <option value="turf1">Main Turf (Premium)</option>
                            <option value="turf2">Side Turf (Standard)</option>
                            <option value="turf3">Practice Turf (Basic)</option>
                        </select>
                    </div>
                </div>

                <!-- Time Slots -->
                <div class="form-section">
                    <h3>‚è∞ Available Time Slots</h3>
                    <div class="time-slots" id="timeSlots">
                        <!-- Time slots will be populated here -->
                    </div>
                    <div class="slot-limit-warning" id="slotWarning" style="display: none;">
                        You can select up to 3 consecutive slots only.
                    </div>
                </div>

                <!-- Selected Slots Summary -->
                <div class="selected-slots" id="selectedSlots" style="display: none;">
                    <h4>Selected Slots</h4>
                    <div id="slotSummary"></div>
                </div>

                <!-- Contact Information -->
                <div class="form-section">
                    <h3>üìû Contact Information</h3>
                    <div class="contact-info">
                        <input type="text" class="contact-input" id="playerName" placeholder="Your Name" required>
                        <input type="email" class="contact-input" id="playerEmail" placeholder="Email Address" required>
                        <input type="tel" class="contact-input" id="playerPhone" placeholder="Phone Number" required>
                        <input type="number" class="contact-input" id="playerCount" placeholder="Number of Players" min="1" max="22" required>
                    </div>
                </div>

                <!-- Special Requests -->
                <div class="form-section">
                    <h3>üìù Special Requests</h3>
                    <textarea class="special-requests" id="specialRequests" placeholder="Any special requests or requirements..."></textarea>
                </div>

                <!-- Booking Summary -->
                <div class="booking-summary" id="bookingSummary" style="display: none;">
                    <h3>üí∞ Booking Summary</h3>
                    <div class="summary-row">
                        <span>Selected Slots:</span>
                        <span id="summarySlots">0</span>
                    </div>
                    <div class="summary-row">
                        <span>Price per Slot:</span>
                        <span id="summaryPricePerSlot">‡ß≥0</span>
                    </div>
                    <div class="summary-row">
                        <span>Subtotal:</span>
                        <span id="summarySubtotal">‡ß≥0</span>
                    </div>
                    <div class="summary-row">
                        <span>Booking Fee:</span>
                        <span id="summaryBookingFee">‡ß≥50</span>
                    </div>
                    <div class="summary-row">
                        <span>Total Amount:</span>
                        <span id="summaryTotal">‡ß≥0</span>
                    </div>
                </div>

                <button type="submit" class="submit-btn" id="submitBtn" disabled>
                    Submit Booking Request
                </button>
            </form>
        </div>
    </div>

    <script>
        // Turf pricing
        const turfPricing = {
            turf1: 1500, // Premium
            turf2: 1200, // Standard
            turf3: 800   // Basic
        };

        // Generate time slots from 6 AM to 10 PM
        const timeSlots = [];
        for (let hour = 6; hour <= 21; hour++) {
            const startTime = hour.toString().padStart(2, '0') + ':00';
            const endTime = (hour + 1).toString().padStart(2, '0') + ':00';
            timeSlots.push({
                id: `slot_${hour}`,
                start: startTime,
                end: endTime,
                display: `${startTime} - ${endTime}`
            });
        }

        let selectedSlots = [];
        let bookedSlots = []; // This would come from backend
        let currentTurf = '';
        let currentDate = '';

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set minimum date to today
            const today = new Date().toISOString().split('T')[0];
            document.getElementById('bookingDate').min = today;
            
            // Set default date to today
            document.getElementById('bookingDate').value = today;
            
            // Add event listeners
            document.getElementById('bookingDate').addEventListener('change', loadTimeSlots);
            document.getElementById('turfSelect').addEventListener('change', loadTimeSlots);
            document.getElementById('bookingForm').addEventListener('submit', handleSubmit);
        });

        function loadTimeSlots() {
            const date = document.getElementById('bookingDate').value;
            const turf = document.getElementById('turfSelect').value;
            
            if (!date || !turf) return;
            
            currentDate = date;
            currentTurf = turf;
            
            // Simulate some booked slots (this would come from backend)
            bookedSlots = ['slot_10', 'slot_15', 'slot_18']; // Example booked slots
            
            const timeSlotsContainer = document.getElementById('timeSlots');
            timeSlotsContainer.innerHTML = '';
            
            timeSlots.forEach(slot => {
                const slotElement = document.createElement('div');
                slotElement.className = 'time-slot';
                slotElement.dataset.slotId = slot.id;
                
                if (bookedSlots.includes(slot.id)) {
                    slotElement.classList.add('booked');
                }
                
                slotElement.innerHTML = `
                    <div class="time">${slot.display}</div>
                    <div class="price">‡ß≥${turfPricing[turf]}</div>
                `;
                
                if (!bookedSlots.includes(slot.id)) {
                    slotElement.addEventListener('click', () => selectSlot(slot.id));
                }
                
                timeSlotsContainer.appendChild(slotElement);
            });
            
            // Reset selections
            selectedSlots = [];
            updateSelectedSlots();
        }

        function selectSlot(slotId) {
            const slotElement = document.querySelector(`[data-slot-id="${slotId}"]`);
            
            if (slotElement.classList.contains('selected')) {
                // Deselect slot
                selectedSlots = selectedSlots.filter(id => id !== slotId);
                slotElement.classList.remove('selected');
            } else {
                // Check if we can select this slot
                if (canSelectSlot(slotId)) {
                    selectedSlots.push(slotId);
                    slotElement.classList.add('selected');
                } else {
                    showAlert('You can only select up to 3 consecutive slots!', 'error');
                }
            }
            
            updateSelectedSlots();
        }

        function canSelectSlot(slotId) {
            if (selectedSlots.length === 0) return true;
            if (selectedSlots.length >= 3) return false;
            
            const slotIndex = timeSlots.findIndex(slot => slot.id === slotId);
            const selectedIndices = selectedSlots.map(id => timeSlots.findIndex(slot => slot.id === id));
            
            // Check if the new slot is consecutive to existing selections
            const allIndices = [...selectedIndices, slotIndex].sort((a, b) => a - b);
            
            // Check if all indices are consecutive
            for (let i = 1; i < allIndices.length; i++) {
                if (allIndices[i] - allIndices[i-1] !== 1) {
                    return false;
                }
            }
            
            return true;
        }

        function updateSelectedSlots() {
            const selectedSlotsContainer = document.getElementById('selectedSlots');
            const slotSummaryContainer = document.getElementById('slotSummary');
            const bookingSummaryContainer = document.getElementById('bookingSummary');
            const submitBtn = document.getElementById('submitBtn');
            
            if (selectedSlots.length === 0) {
                selectedSlotsContainer.style.display = 'none';
                bookingSummaryContainer.style.display = 'none';
                submitBtn.disabled = true;
                return;
            }
            
            selectedSlotsContainer.style.display = 'block';
            bookingSummaryContainer.style.display = 'block';
            submitBtn.disabled = false;
            
            // Update slot summary
            slotSummaryContainer.innerHTML = '';
            selectedSlots.forEach(slotId => {
                const slot = timeSlots.find(s => s.id === slotId);
                const summaryElement = document.createElement('div');
                summaryElement.className = 'slot-summary';
                summaryElement.innerHTML = `
                    <div class="slot-info">
                        <span>‚è∞</span>
                        <span>${slot.display}</span>
                        <span>‡ß≥${turfPricing[currentTurf]}</span>
                    </div>
                    <button type="button" class="remove-slot" onclick="removeSlot('${slotId}')">Remove</button>
                `;
                slotSummaryContainer.appendChild(summaryElement);
            });
            
            // Update booking summary
            const pricePerSlot = turfPricing[currentTurf];
            const subtotal = selectedSlots.length * pricePerSlot;
            const bookingFee = 50;
            const total = subtotal + bookingFee;
            
            document.getElementById('summarySlots').textContent = selectedSlots.length;
            document.getElementById('summaryPricePerSlot').textContent = `‡ß≥${pricePerSlot}`;
            document.getElementById('summarySubtotal').textContent = `‡ß≥${subtotal}`;
            document.getElementById('summaryTotal').textContent = `‡ß≥${total}`;
        }

        function removeSlot(slotId) {
            selectedSlots = selectedSlots.filter(id => id !== slotId);
            document.querySelector(`[data-slot-id="${slotId}"]`).classList.remove('selected');
            updateSelectedSlots();
        }

        function handleSubmit(e) {
            e.preventDefault();
            
            // Validate form
            const name = document.getElementById('playerName').value.trim();
            const email = document.getElementById('playerEmail').value.trim();
            const phone = document.getElementById('playerPhone').value.trim();
            const playerCount = document.getElementById('playerCount').value;
            
            if (!name || !email || !phone || !playerCount) {
                showAlert('Please fill in all required fields!', 'error');
                return;
            }
            
            if (selectedSlots.length === 0) {
                showAlert('Please select at least one time slot!', 'error');
                return;
            }
            
            // Create booking object
            const booking = {
                id: 'BOOK_' + Date.now(),
                date: currentDate,
                turf: currentTurf,
                slots: selectedSlots,
                customerInfo: {
                    name: name,
                    email: email,
                    phone: phone,
                    playerCount: parseInt(playerCount)
                },
                specialRequests: document.getElementById('specialRequests').value.trim(),
                pricePerSlot: turfPricing[currentTurf],
                totalAmount: (selectedSlots.length * turfPricing[currentTurf]) + 50,
                status: 'pending',
                timestamp: new Date().toISOString()
            };
            
            // Save to localStorage (in real app, this would be sent to backend)
            const existingBookings = JSON.parse(localStorage.getItem('bookingRequests') || '[]');
            existingBookings.push(booking);
            localStorage.setItem('bookingRequests', JSON.stringify(existingBookings));
            
            // Show success message
            showAlert('Booking request submitted successfully! You will receive a confirmation once the owner approves your request.', 'success');
            
            // Reset form
            setTimeout(() => {
                document.getElementById('bookingForm').reset();
                selectedSlots = [];
                updateSelectedSlots();
                loadTimeSlots();
            }, 2000);
        }

        function showAlert(message, type) {
            const alertElement = document.getElementById('alertMessage');
            alertElement.textContent = message;
            alertElement.className = `alert ${type}`;
            alertElement.style.display = 'block';
            
            setTimeout(() => {
                alertElement.style.display = 'none';
            }, 5000);
        }

        function goBack() {
            window.history.back();
        }
    </script>
</body>
</html>