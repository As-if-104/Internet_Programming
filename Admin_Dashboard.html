<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard - TurfTime</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #f5f7fa;
            color: #333;
        }

        .header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px 0;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .admin-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .admin-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 30px 20px;
        }

        .dashboard-header {
            margin-bottom: 30px;
        }

        .dashboard-title {
            font-size: 2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .dashboard-subtitle {
            color: #666;
            font-size: 1.1rem;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }

        .stat-card {
            background: white;
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            transition: transform 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-5px);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
        }

        .stat-number {
            font-size: 2rem;
            font-weight: bold;
            color: #667eea;
            margin-bottom: 10px;
        }

        .stat-label {
            color: #666;
            font-size: 0.9rem;
        }

        .content-section {
            background: white;
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
        }

        .section-title {
            font-size: 1.5rem;
            font-weight: bold;
            color: #333;
        }

        .notification-badge {
            background: #ff4757;
            color: white;
            border-radius: 50%;
            padding: 5px 10px;
            font-size: 0.8rem;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .user-request {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 15px;
            border-left: 4px solid #667eea;
            transition: all 0.3s ease;
        }

        .user-request:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .user-request-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 15px;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-size: 1.2rem;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .user-email {
            color: #666;
            font-size: 0.9rem;
            margin-bottom: 5px;
        }

        .user-type {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 500;
        }

        .user-type.owner {
            background: #2ed573;
        }

        .user-details {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin-bottom: 15px;
        }

        .detail-item {
            background: white;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #e1e5e9;
        }

        .detail-label {
            color: #666;
            font-size: 0.8rem;
            margin-bottom: 5px;
        }

        .detail-value {
            color: #333;
            font-weight: 500;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .btn-approve {
            background: #2ed573;
            color: white;
        }

        .btn-approve:hover {
            background: #26d065;
            transform: translateY(-2px);
        }

        .btn-reject {
            background: #ff4757;
            color: white;
        }

        .btn-reject:hover {
            background: #ff3742;
            transform: translateY(-2px);
        }

        .btn-view {
            background: #667eea;
            color: white;
        }

        .btn-view:hover {
            background: #5a67d8;
            transform: translateY(-2px);
        }

        .empty-state {
            text-align: center;
            padding: 40px;
            color: #666;
        }

        .empty-icon {
            font-size: 3rem;
            margin-bottom: 20px;
        }

        .empty-title {
            font-size: 1.2rem;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .empty-text {
            color: #999;
        }

        .search-filter {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .search-box {
            flex: 1;
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
        }

        .search-box:focus {
            outline: none;
            border-color: #667eea;
        }

        .filter-select {
            padding: 12px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
            font-size: 1rem;
            background: white;
        }

        .tab-buttons {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }

        .tab-btn {
            padding: 10px 20px;
            border: 2px solid #e1e5e9;
            background: white;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: 500;
            transition: all 0.3s ease;
        }

        .tab-btn.active {
            background: #667eea;
            color: white;
            border-color: #667eea;
        }

        .tab-btn:hover {
            border-color: #667eea;
        }

        .recent-actions {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 15px;
            margin-top: 20px;
        }

        .recent-actions h4 {
            margin-bottom: 15px;
            color: #333;
        }

        .action-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #e1e5e9;
        }

        .action-item:last-child {
            border-bottom: none;
        }

        .action-text {
            color: #666;
            font-size: 0.9rem;
        }

        .action-time {
            color: #999;
            font-size: 0.8rem;
        }

        @media (max-width: 768px) {
            .header-content {
                flex-direction: column;
                gap: 15px;
            }
            
            .user-request-header {
                flex-direction: column;
                gap: 15px;
            }
            
            .action-buttons {
                flex-direction: column;
            }
            
            .search-filter {
                flex-direction: column;
            }
            
            .tab-buttons {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <div class="header-content">
            <div class="logo">
                <span>üèüÔ∏è</span>
                TurfTime Admin
            </div>
            <div class="admin-info">
                <div class="admin-avatar">üë®‚Äçüíº</div>
                <div>
                    <div>Admin Panel</div>
                    <div style="font-size: 0.8rem; opacity: 0.8;">System Administrator</div>
                </div>
            </div>
        </div>
    </div>

    <div class="container">
        <div class="dashboard-header">
            <div class="dashboard-title">Admin Dashboard</div>
            <div class="dashboard-subtitle">Manage user registrations and system oversight</div>
        </div>

        <div class="stats-grid">
            <div class="stat-card">
                <div class="stat-icon">‚è≥</div>
                <div class="stat-number" id="pendingCount">0</div>
                <div class="stat-label">Pending Requests</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚úÖ</div>
                <div class="stat-number" id="approvedCount">0</div>
                <div class="stat-label">Approved Users</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">‚ùå</div>
                <div class="stat-number" id="rejectedCount">0</div>
                <div class="stat-label">Rejected Requests</div>
            </div>
            <div class="stat-card">
                <div class="stat-icon">üìä</div>
                <div class="stat-number" id="totalCount">0</div>
                <div class="stat-label">Total Requests</div>
            </div>
        </div>

        <div class="content-section">
            <div class="section-header">
                <h3 class="section-title">User Registration Requests</h3>
                <div class="notification-badge" id="notificationBadge" style="display: none;">0</div>
            </div>

            <div class="tab-buttons">
                <button class="tab-btn active" onclick="showTab('pending')">Pending Requests</button>
                <button class="tab-btn" onclick="showTab('approved')">Approved Users</button>
                <button class="tab-btn" onclick="showTab('rejected')">Rejected Requests</button>
            </div>

            <div class="search-filter">
                <input type="text" class="search-box" placeholder="Search by name, email, or phone..." id="searchInput">
                <select class="filter-select" id="typeFilter">
                    <option value="">All Types</option>
                    <option value="customer">Customers</option>
                    <option value="owner">Turf Owners</option>
                </select>
            </div>

            <div id="pendingTab" class="tab-content">
                <div id="pendingRequests">
                    <div class="empty-state">
                        <div class="empty-icon">üìã</div>
                        <div class="empty-title">No Pending Requests</div>
                        <div class="empty-text">All registration requests have been processed</div>
                    </div>
                </div>
            </div>

            <div id="approvedTab" class="tab-content" style="display: none;">
                <div id="approvedUsers">
                    <div class="empty-state">
                        <div class="empty-icon">üë•</div>
                        <div class="empty-title">No Approved Users</div>
                        <div class="empty-text">No users have been approved yet</div>
                    </div>
                </div>
            </div>

            <div id="rejectedTab" class="tab-content" style="display: none;">
                <div id="rejectedUsers">
                    <div class="empty-state">
                        <div class="empty-icon">üö´</div>
                        <div class="empty-title">No Rejected Requests</div>
                        <div class="empty-text">No registration requests have been rejected</div>
                    </div>
                </div>
            </div>
        </div>

        <div class="content-section">
            <div class="section-header">
                <h3 class="section-title">Recent Actions</h3>
            </div>
            <div class="recent-actions">
                <div id="recentActionsList">
                    <div class="action-item">
                        <div class="action-text">System started</div>
                        <div class="action-time">Just now</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let pendingUsers = JSON.parse(localStorage.getItem('pendingUsers')) || [];
        let verifiedUsers = JSON.parse(localStorage.getItem('verifiedUsers')) || [];
        let rejectedUsers = JSON.parse(localStorage.getItem('rejectedUsers')) || [];
        let recentActions = JSON.parse(localStorage.getItem('recentActions')) || [];

        function updateStats() {
            document.getElementById('pendingCount').textContent = pendingUsers.length;
            document.getElementById('approvedCount').textContent = verifiedUsers.length;
            document.getElementById('rejectedCount').textContent = rejectedUsers.length;
            document.getElementById('totalCount').textContent = pendingUsers.length + verifiedUsers.length + rejectedUsers.length;
            
            const notificationBadge = document.getElementById('notificationBadge');
            if (pendingUsers.length > 0) {
                notificationBadge.style.display = 'block';
                notificationBadge.textContent = pendingUsers.length;
            } else {
                notificationBadge.style.display = 'none';
            }
        }

        function renderUserRequest(user, type) {
            const userTypeClass = user.type === 'owner' ? 'owner' : 'customer';
            const userTypeLabel = user.type === 'owner' ? 'Turf Owner' : 'Customer';
            
            const businessInfo = user.type === 'owner' ? `
                <div class="detail-item">
                    <div class="detail-label">Turf Name</div>
                    <div class="detail-value">${user.businessName || 'N/A'}</div>
                </div>
                <div class="detail-item">
                    <div class="detail-label">Turf Address</div>
                    <div class="detail-value">${user.businessAddress || 'N/A'}</div>
                </div>
            ` : '';

            const actionButtons = type === 'pending' ? `
                <div class="action-buttons">
                    <button class="btn btn-approve" onclick="approveUser(${user.id})">Approve</button>
                    <button class="btn btn-reject" onclick="rejectUser(${user.id})">Reject</button>
                </div>
            ` : '';

            return `
                <div class="user-request">
                    <div class="user-request-header">
                        <div class="user-info">
                            <div class="user-name">${user.name}</div>
                            <div class="user-email">${user.email}</div>
                            <div class="user-type ${userTypeClass}">${userTypeLabel}</div>
                        </div>
                        ${actionButtons}
                    </div>
                    <div class="user-details">
                        <div class="detail-item">
                            <div class="detail-label">Phone</div>
                            <div class="detail-value">${user.phone}</div>
                        </div>
                        <div class="detail-item">
                            <div class="detail-label">Registration Date</div>
                            <div class="detail-value">${new Date(user.registrationDate).toLocaleDateString()}</div>
                        </div>
                        ${businessInfo}
                    </div>
                </div>
            `;
        }

        function renderUsers(users, containerId, type) {
            const container = document.getElementById(containerId);
            
            if (users.length === 0) {
                const emptyMessages = {
                    pending: { icon: 'üìã', title: 'No Pending Requests', text: 'All registration requests have been processed' },
                    approved: { icon: 'üë•', title: 'No Approved Users', text: 'No users have been approved yet' },
                    rejected: { icon: 'üö´', title: 'No Rejected Requests', text: 'No registration requests have been rejected' }
                };
                
                const message = emptyMessages[type];
                container.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">${message.icon}</div>
                        <div class="empty-title">${message.title}</div>
                        <div class="empty-text">${message.text}</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = users.map(user => renderUserRequest(user, type)).join('');
        }

        function approveUser(userId) {
            const userIndex = pendingUsers.findIndex(u => u.id === userId);
            if (userIndex !== -1) {
                const user = pendingUsers[userIndex];
                user.status = 'approved';
                user.approvedDate = new Date().toISOString();
                
                verifiedUsers.push(user);
                pendingUsers.splice(userIndex, 1);
                
                localStorage.setItem('pendingUsers', JSON.stringify(pendingUsers));
                localStorage.setItem('verifiedUsers', JSON.stringify(verifiedUsers));
                
                addRecentAction(`Approved registration for ${user.name} (${user.type})`);
                updateAllViews();
                
                // Show success message
                showNotification(`User ${user.name} has been approved successfully!`, 'success');
            }
        }

        function rejectUser(userId) {
            const userIndex = pendingUsers.findIndex(u => u.id === userId);
            if (userIndex !== -1) {
                const user = pendingUsers[userIndex];
                user.status = 'rejected';
                user.rejectedDate = new Date().toISOString();
                
                rejectedUsers.push(user);
                pendingUsers.splice(userIndex, 1);
                
                localStorage.setItem('pendingUsers', JSON.stringify(pendingUsers));
                localStorage.setItem('rejectedUsers', JSON.stringify(rejectedUsers));
                
                addRecentAction(`Rejected registration for ${user.name} (${user.type})`);
                updateAllViews();
                
                // Show success message
                showNotification(`User ${user.name} has been rejected.`, 'info');
            }
        }

        function addRecentAction(action) {
            const newAction = {
                id: Date.now(),
                action: action,
                timestamp: new Date().toISOString()
            };
            
            recentActions.unshift(newAction);
            
            // Keep only last 10 actions
            if (recentActions.length > 10) {
                recentActions = recentActions.slice(0, 10);
            }
            
            localStorage.setItem('recentActions', JSON.stringify(recentActions));
            renderRecentActions();
        }

        function renderRecentActions() {
            const container = document.getElementById('recentActionsList');
            
            if (recentActions.length === 0) {
                container.innerHTML = `
                    <div class="action-item">
                        <div class="action-text">System started</div>
                        <div class="action-time">Just now</div>
                    </div>
                `;
                return;
            }

            container.innerHTML = recentActions.map(action => `
                <div class="action-item">
                    <div class="action-text">${action.action}</div>
                    <div class="action-time">${formatTime(action.timestamp)}</div>
                </div>
            `).join('');
        }

        function formatTime(timestamp) {
            const now = new Date();
            const actionTime = new Date(timestamp);
            const diff = now - actionTime;
            
            if (diff < 60000) return 'Just now';
            if (diff < 3600000) return `${Math.floor(diff / 60000)}m ago`;
            if (diff < 86400000) return `${Math.floor(diff / 3600000)}h ago`;
            return `${Math.floor(diff / 86400000)}d ago`;
        }

        function showTab(tabName) {
            // Hide all tabs
            document.querySelectorAll('.tab-content').forEach(tab => {
                tab.style.display = 'none';
            });
            
            // Remove active class from all buttons
            document.querySelectorAll('.tab-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // Show selected tab
            document.getElementById(tabName + 'Tab').style.display = 'block';
            
            // Add active class to clicked button
            event.target.classList.add('active');
        }

        function updateAllViews() {
            updateStats();
            renderUsers(pendingUsers, 'pendingRequests', 'pending');
            renderUsers(verifiedUsers, 'approvedUsers', 'approved');
            renderUsers(rejectedUsers, 'rejectedUsers', 'rejected');
        }

        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                padding: 15px 25px;
                border-radius: 10px;
                color: white;
                font-weight: 500;
                z-index: 1001;
                animation: slideInRight 0.3s ease;
            `;
            
            if (type === 'success') {
                notification.style.background = '#4CAF50';
            } else if (type === 'error') {
                notification.style.background = '#f44336';
            } else {
                notification.style.background = '#2196F3';
            }
            
            notification.textContent = message;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Search and filter functionality
        document.getElementById('searchInput').addEventListener('input', function() {
            filterUsers();
        });

        document.getElementById('typeFilter').addEventListener('change', function() {
            filterUsers();
        });

        function filterUsers() {
            const searchTerm = document.getElementById('searchInput').value.toLowerCase();
            const typeFilter = document.getElementById('typeFilter').value;
            
            const filterUser = (user) => {
                const matchesSearch = user.name.toLowerCase().includes(searchTerm) ||
                                    user.email.toLowerCase().includes(searchTerm) ||
                                    user.phone.includes(searchTerm);
                const matchesType = !typeFilter || user.type === typeFilter;
                return matchesSearch && matchesType;
            };
            
            const filteredPending = pendingUsers.filter(filterUser);
            const filteredApproved = verifiedUsers.filter(filterUser);
            const filteredRejected = rejectedUsers.filter(filterUser);
            
            renderUsers(filteredPending, 'pendingRequests', 'pending');
            renderUsers(filteredApproved, 'approvedUsers', 'approved');
            renderUsers(filteredRejected, 'rejectedUsers', 'rejected');
        }

        // Initialize dashboard
        updateAllViews();
        renderRecentActions();

        // Auto-refresh every 5 seconds to check for new registrations
        setInterval(() => {
            const newPendingUsers = JSON.parse(localStorage.getItem('pendingUsers')) || [];
            const newVerifiedUsers = JSON.parse(localStorage.getItem('verifiedUsers')) || [];
            const newRejectedUsers = JSON.parse(localStorage.getItem('rejectedUsers')) || [];
            
            if (newPendingUsers.length !== pendingUsers.length) {
                pendingUsers = newPendingUsers;
                verifiedUsers = newVerifiedUsers;
                rejectedUsers = newRejectedUsers;
                updateAllViews();
            }
        }, 5000);
    </script>
</body>
</html>